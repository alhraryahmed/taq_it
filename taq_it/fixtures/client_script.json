[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "taq_data1",
  "enabled": 1,
  "modified": "2025-10-31 21:30:41.238444",
  "module": "taqafia",
  "name": "Ø¹Ø¯Ù… Ø§Ø¶Ø§ÙØ© Ø§Ù„ÙˆØ¹Ø§Ø¸ Ø§Ù„Ø§Ù‚Ù„ Ù…Ù† 23 Ø¹Ø§Ù…",
  "script": "frappe.ui.form.on('taq_data1', {\r\n    validate: function(frm) {\r\n        if (frm.doc.agee && frm.doc.agee < 23) {\r\n            frappe.throw(__('ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠÙƒÙˆÙ† Ø¹Ù…Ø± Ø§Ù„ÙˆØ§Ø¹Ø¸ Ø£Ù‚Ù„ Ù…Ù† 23 Ø¹Ø§Ù…'));\r\n        }\r\n    },\r\n    agee: function(frm) {\r\n        if (frm.doc.agee && frm.doc.agee < 23) {\r\n            frappe.msgprint(__('ÙŠØ¬Ø¨ Ø£Ù† Ù„Ø§ ÙŠÙƒÙˆÙ† Ø¹Ù…Ø± Ø§Ù„ÙˆØ§Ø¹Ø¸ Ø£Ù‚Ù„ Ù…Ù† 23 Ø¹Ø§Ù…'));\r\n            frm.set_value('agee', '');  // ÙŠÙ…Ø³Ø­ Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ù…Ø¯Ø®Ù„\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "taq_data1",
  "enabled": 1,
  "modified": "2025-10-31 21:32:13.921715",
  "module": "taqafia",
  "name": "Ø§Ù„Ø§Ø­Ø§Ù„Ø© Ù„Ù„Ø¬Ù†Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„ÙˆØ¹Ø§Ø¸",
  "script": "frappe.ui.form.on('taq_data1', {\r\n    refresh: function(frm) {\r\n\r\n        // Ø²Ø± Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ÙÙŠ taq_data1\r\n        if(!frm.doc.taq_referred) {\r\n            frm.add_custom_button(__('Ø¥Ø­Ø§Ù„Ø© Ù„Ù„Ø¬Ù†Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„ÙˆØ¹Ø§Ø¸'), function() {\r\n\r\n                let new_doc = {\r\n                    doctype: \"lagna_taq\",\r\n                    nameee: frm.doc.name,         \r\n                    nameee_display: frm.doc.namee, \r\n                    makteeeb: frm.doc.makteeb,      \r\n                    taq_data1_ref: frm.doc.name,    \r\n                    taq_data1_id: frm.doc.name,     \r\n                    taq_referred_status: 1          \r\n                };\r\n\r\n                frappe.call({\r\n                    method: \"frappe.client.insert\",\r\n                    args: { doc: new_doc },\r\n                    callback: function(r) {\r\n                        if(!r.exc && r.message) {\r\n                            frappe.msgprint(__('ØªÙ…Øª Ø§Ù„Ø¥Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ Ù„Ø¬Ù†Ø© Ù‚Ø¨ÙˆÙ„ Ø§Ù„ÙˆØ¹Ø§Ø¸'));\r\n\r\n                            frappe.db.set_value(frm.doctype, frm.doc.name, 'taq_referred', 1);\r\n\r\n                            frappe.set_route(\"Form\", \"lagna_taq\", r.message.name);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "lagna_taq",
  "enabled": 1,
  "modified": "2025-10-01 15:38:00.482735",
  "module": "taqafia",
  "name": "Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ù…Ø³ØªÙ†Ø¯ Ø§Ù„ÙˆØ§Ø¹Ø¸",
  "script": "frappe.ui.form.on('lagna_taq', {\r\n    refresh: function(frm) {\r\n\r\n        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø£Ø²Ø±Ø§Ø± Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ù†ÙØ³ Ø§Ù„Ø§Ø³Ù…\r\n        frm.clear_custom_buttons();\r\n\r\n        // Ø¥Ø¶Ø§ÙØ© Ø²Ø± \"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„\" ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù…Ø±Ø¬Ø¹\r\n        if(frm.doc.taq_data1_ref) {\r\n            frm.add_custom_button(__('Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„'), function() {\r\n                frappe.set_route(\"Form\", \"taq_data1\", frm.doc.taq_data1_ref);\r\n            });\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "lagna_taq",
  "enabled": 1,
  "modified": "2025-10-06 12:52:02.807500",
  "module": "taqafia",
  "name": "ÙˆØ¶Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
  "script": "frappe.ui.form.on('lagna_taq', {\r\n    refresh: function(frm) {\r\n        if (!frm.doc.moq) {\r\n            frm.set_value('moq', frappe.session.user);\r\n        }\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "taq_data1",
  "enabled": 1,
  "modified": "2025-10-28 17:56:12.824126",
  "module": "taqafia",
  "name": "ØªØµÙ…ÙŠÙ…",
  "script": "frappe.ui.form.on('taq_data1', {\r\n    refresh: function(frm) {\r\n        // ğŸŒ«ï¸ Ø®Ù„ÙÙŠØ© Ø²Ø¬Ø§Ø¬ÙŠØ© Ù†Ø§Ø¹Ù…Ø©\r\n        $('body').css({\r\n            'background': 'linear-gradient(135deg, #e3f2fd 0%, #ffffff 100%)',\r\n            'font-family': '\"Poppins\", \"Segoe UI\", sans-serif',\r\n            'color': '#1e293b',\r\n            'transition': 'background 0.6s ease'\r\n        });\r\n\r\n        // ğŸ§Š Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù„Ù„ÙÙˆØ±Ù…\r\n        $('.form-layout').css({\r\n            'background': 'rgba(255, 255, 255, 0.7)',\r\n            'backdrop-filter': 'blur(14px)',\r\n            '-webkit-backdrop-filter': 'blur(14px)',\r\n            'border-radius': '18px',\r\n            'border': '1px solid rgba(255, 255, 255, 0.5)',\r\n            'box-shadow': '0 8px 25px rgba(0, 0, 0, 0.08)',\r\n            'padding': '35px 40px',\r\n            'margin': '20px auto',\r\n            'max-width': '950px',\r\n            'transition': 'all 0.4s ease'\r\n        }).hide().fadeIn(700);\r\n\r\n        // ğŸ©µ ØªØ±ÙˆÙŠØ³Ø© Ø§Ù„ÙÙˆØ±Ù… (Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ)\r\n        $('.page-head .title-text').css({\r\n            'font-size': '1.6rem',\r\n            'font-weight': '600',\r\n            'color': '#0f172a',\r\n            'letter-spacing': '0.5px'\r\n        });\r\n\r\n        // âœ¨ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„ÙØ±Ø¹ÙŠØ© Ù„Ù„Ø£Ù‚Ø³Ø§Ù…\r\n        $('.form-section .section-head').css({\r\n            'color': '#334155',\r\n            'font-weight': '600',\r\n            'font-size': '1.05rem',\r\n            'border-left': '4px solid #3B82F6',\r\n            'padding-left': '12px',\r\n            'margin-bottom': '10px'\r\n        });\r\n\r\n        // ğŸ›ï¸ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙˆÙ„\r\n        $('input, select, textarea').css({\r\n            'border-radius': '10px',\r\n            'border': '1px solid #d1d5db',\r\n            'background': 'rgba(255, 255, 255, 0.9)',\r\n            'padding': '10px 12px',\r\n            'transition': 'all 0.3s ease',\r\n            'font-size': '0.95rem'\r\n        }).focus(function() {\r\n            $(this).css({\r\n                'border-color': '#3B82F6',\r\n                'box-shadow': '0 0 8px rgba(59, 130, 246, 0.4)',\r\n                'background': '#fff'\r\n            });\r\n        }).blur(function() {\r\n            $(this).css({\r\n                'border-color': '#d1d5db',\r\n                'box-shadow': 'none',\r\n                'background': 'rgba(255, 255, 255, 0.9)'\r\n            });\r\n        });\r\n\r\n        // ğŸ’  Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\r\n        $('.primary-action').css({\r\n            'background': 'linear-gradient(90deg, #3B82F6, #06B6D4)',\r\n            'border': 'none',\r\n            'border-radius': '10px',\r\n            'color': '#fff',\r\n            'font-weight': '600',\r\n            'padding': '10px 26px',\r\n            'box-shadow': '0 4px 15px rgba(59, 130, 246, 0.4)',\r\n            'transition': 'all 0.3s ease'\r\n        }).hover(function() {\r\n            $(this).css({\r\n                'transform': 'translateY(-2px)',\r\n                'box-shadow': '0 6px 18px rgba(59, 130, 246, 0.5)'\r\n            });\r\n        }, function() {\r\n            $(this).css({\r\n                'transform': 'translateY(0)',\r\n                'box-shadow': '0 4px 15px rgba(59, 130, 246, 0.4)'\r\n            });\r\n        });\r\n\r\n        // ğŸŒŸ ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµÙÙˆÙ ÙÙŠ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„\r\n        $('.grid-row').hover(function() {\r\n            $(this).css('background', 'rgba(219, 234, 254, 0.4)');\r\n        }, function() {\r\n            $(this).css('background', 'transparent');\r\n        });\r\n\r\n        // ğŸŒˆ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ ØµØºÙŠØ±Ø© Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­\r\n        frappe.show_alert({\r\n            message: __('ğŸŒ¤ï¸ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚'),\r\n            indicator: 'blue'\r\n        }, 4);\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Issue",
  "enabled": 1,
  "modified": "2025-11-10 12:35:16.367029",
  "module": "Support",
  "name": "Ø±Ø¨Ø· Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„Ø¨Ù„Ø§Øº",
  "script": "frappe.ui.form.on('Issue', {\r\n    onload: function(frm) {\r\n        // Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ\r\n        if (!frm.doc.user_account) {\r\n            frm.set_value('user_account', frappe.session.user);\r\n        }\r\n\r\n        // Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„ Ù…Ù† DocType User\r\n        frappe.db.get_value('User', frappe.session.user, 'full_name', (r) => {\r\n            if (r && r.full_name) {\r\n                frm.set_value('sender_name', r.full_name);\r\n            }\r\n        });\r\n\r\n        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² Ùˆ IP (ÙŠØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Client-side)\r\n        frappe.call({\r\n            method: \"frappe.client.get_value\",\r\n            args: {\r\n                doctype: \"User\",\r\n                filters: { \"name\": frappe.session.user },\r\n                fieldname: [\"last_ip\"]\r\n            },\r\n            callback: function(r) {\r\n                if (r.message && r.message.last_ip) {\r\n                    frm.set_value('device_ip', r.message.last_ip);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Ø¬Ù„Ø¨ Ø§Ø³Ù… Ø§Ù„Ø¬Ù‡Ø§Ø² Ù…Ù† Ø§Ù„Ù€ browser\r\n        try {\r\n            frm.set_value('device_name', window.navigator.userAgent);\r\n        } catch (e) {\r\n            console.log(\"Error fetching device name:\", e);\r\n        }\r\n\r\n        // Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨ MAC Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ø¨Ø§Ø´Ø±Ø© (Ù…Ø­Ø¸ÙˆØ± Ø£Ù…Ù†ÙŠÙ‹Ø§)\r\n        frm.set_df_property('device_mac', 'description', 'ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„Ø£Ø³Ø¨Ø§Ø¨ Ø£Ù…Ø§Ù† Ø§Ù„Ù…ØªØµÙØ­');\r\n    }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "zeyarat",
  "enabled": 1,
  "modified": "2025-11-12 15:47:52.030530",
  "module": "Lagnaa",
  "name": "Ø¬Ù„Ø¨ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹",
  "script": "frappe.ui.form.on('Ø§Ø³Ù…_DocType', {\r\n    refresh: function(frm) {\r\n        generate_map(frm);\r\n    },\r\n    Ø§Ù„Ù…ÙˆÙ‚Ø¹_Ø§Ù„Ø®Ø§Øµ_Ø¨Ø§Ù„Ù…ÙƒØªØ¨: function(frm) {\r\n        generate_map(frm);\r\n    }\r\n});\r\n\r\nfunction generate_map(frm) {\r\n    if(!frm.doc.Ø§Ù„Ù…ÙˆÙ‚Ø¹_Ø§Ù„Ø®Ø§Øµ_Ø¨Ø§Ù„Ù…ÙƒØªØ¨) return;\r\n\r\n    try {\r\n        // ØªØ­ÙˆÙŠÙ„ GeoJSON Ø¥Ù„Ù‰ Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª\r\n        let geojson = JSON.parse(frm.doc.Ø§Ù„Ù…ÙˆÙ‚Ø¹_Ø§Ù„Ø®Ø§Øµ_Ø¨Ø§Ù„Ù…ÙƒØªØ¨);\r\n        let coords = geojson.features[0].geometry.coordinates;\r\n        let lat = coords[1];\r\n        let lng = coords[0];\r\n\r\n        let api_key = \"YOUR_API_KEY\"; // Ø¶Ø¹ Ù…ÙØªØ§Ø­ Google Maps Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§\r\n        let url = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lng}&zoom=15&size=600x300&markers=color:red|${lat},${lng}&key=${api_key}`;\r\n\r\n        // Ø¬Ù„Ø¨ Ø§Ù„ØµÙˆØ±Ø© ÙˆØªØ­ÙˆÙŠÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Base64\r\n        fetch(url)\r\n            .then(response => response.blob())\r\n            .then(blob => {\r\n                let reader = new FileReader();\r\n                reader.onloadend = function() {\r\n                    let base64data = reader.result.split(',')[1]; // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Base64 ÙÙ‚Ø·\r\n                    frm.set_value('map_base64', base64data);\r\n                    frm.save(); // Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ØªØ­Ø¯ÙŠØ«\r\n                }\r\n                reader.readAsDataURL(blob);\r\n            })\r\n            .catch(err => {\r\n                frappe.msgprint(\"Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±ÙŠØ·Ø©: \" + err);\r\n            });\r\n    } catch(e) {\r\n        frappe.msgprint(\"Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹: \" + e.message);\r\n    }\r\n}\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Issue",
  "enabled": 1,
  "modified": "2025-11-12 16:16:29.568226",
  "module": "Support",
  "name": "ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø¸Ø§Ù…",
  "script": "frappe.ui.form.on('Issue', {\r\n    remote_desktob: function(frm) {\r\n        fetch('http://127.0.0.1:5000/run_support')\r\n            .then(res => res.text())\r\n            .then(data => frappe.msgprint(data))\r\n            .catch(err => frappe.msgprint('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚: ' + err));\r\n    }\r\n});\r\n",
  "view": "Form"
 }
]